{"version":3,"sources":["app.js"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["class View {\r\n\tstatic setContainer($container) {\r\n\t\tthis.$container = $container;\t\r\n\t}\r\n\tstatic render(templateId, model) {\r\n\t\tvar template = Handlebars.compile($(`#${templateId}`).html())\r\n\t\tthis.$container.html(template(model || {}));\r\n\t}\r\n}\nclass AjaxInterceptor {\r\n\tstatic init(){\r\n\t\tvar tokenStorage = new Token();\r\n\t\tvar token = tokenStorage.get();\r\n\t\tif (token) \r\n\t\t\tAjaxInterceptor.addToken(token);\r\n\r\n\t\t$(document).on('logined', (e, token) => {\r\n\t\t\ttokenStorage.set(token);\r\n\t\t\tAjaxInterceptor.addToken(token);\r\n\t\t});\r\n\r\n\t\t$(document).on('logedOut', (e) => {\r\n\t\t\ttokenStorage.set('');\r\n\t\t\tif ($.ajaxSettings.headers) \r\n\t\t\t\tdelete $.ajaxSettings.headers['SECRET-TOKEN'];\r\n\t\t});\r\n\t}\r\n\r\n\tstatic addToken(token){\r\n\t\t$.ajaxSetup({\r\n\t\t\theaders: {\r\n\t\t\t\t'SECRET-TOKEN': token\t\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\nclass API {\r\n\tstatic init(api_base){\r\n\t\tthis.ACTIONS = {\r\n\t\t\tSIGN_UP : `${api_base}/signup`,\r\n\t\t\tLOGIN : `${api_base}/login`,\r\n\t\t\tUSERS : `${api_base}/users`,\r\n\t\t\tUSER : `${api_base}/user/:id`\r\n\t\t}\r\n\t}\r\n\r\n\tstatic post(url, form){\r\n\t\treturn $.ajax({\r\n\t\t\t\t  type: \"POST\",\r\n\t\t\t\t  url: url,\r\n\t\t\t\t  data: form.serialize(),\r\n\t\t\t\t  dataType: 'json'\r\n\t\t\t\t});\r\n\t}\r\n\r\n\tstatic get(url){\r\n\t\treturn $.ajax({\r\n\t\t\t\t  type: \"GET\",\r\n\t\t\t\t  url: url,\r\n\t\t\t\t  dataType: 'json'\r\n\t\t\t\t});\r\n\t}\r\n\r\n\tstatic getUsers() {\r\n\t\treturn API.get(this.ACTIONS.USERS);\r\n\t}\r\n\tstatic signUp(form){\r\n\t\treturn API.post(this.ACTIONS.SIGN_UP, form);\r\n\t}\r\n\tstatic login(form){\r\n\t\treturn API.post(this.ACTIONS.LOGIN, form);\r\n\t}\r\n\tstatic getUser(id) {\r\n\t\tvar url = this.ACTIONS.USER.replace(/:id/g, id);\r\n\t\treturn API.get(url);\r\n\t}\r\n}\nclass Auth{\r\n\tstatic isLogined(){\r\n\t\tvar tokenStorage = new Token();\r\n\t\treturn !!tokenStorage.get();\r\n\t}\r\n}\n$(()=>{\r\n    Handlebars.registerPartial(\"input\", $(\"#input-partial\").html());\r\n    Handlebars.registerPartial(\"password\", $(\"#password-partial\").html());\r\n    Handlebars.registerPartial(\"error-summary\", $(\"#error-summary-partial\").html());\r\n    Handlebars.registerPartial(\"navitem\", $(\"#navbar-item-partial\").html());\r\n})\r\n  \nclass ListPage{\r\n\tconstructor(){\r\n\t\tAPI.getUsers()\r\n\t\t   .done((data) => {\r\n\t\t   \t\tvar users = ListPage.adaptVM(data);\r\n\t\t   \t\tView.render('list', { users });\r\n\t\t \t});\r\n\t}\r\n\tstatic adaptVM(data){\r\n\t\treturn data.map(el => {\r\n\t\t\tel.user.isMale = el.user.gender == 'male'\r\n\t\t\treturn el;\r\n\t\t});\r\n\t}\r\n}\nclass Navbar{\r\n\tstatic init(navbar, template){\r\n\t\tthis.navBar = navbar;\r\n\t\tthis.template = Handlebars.compile(template.html());\r\n\t\tNavbar.render(Navbar.createVm());\r\n\t}\r\n\r\n\tstatic render(model){\r\n\t\tthis.navBar.html(this.template(model));\r\n\t}\r\n\r\n\tstatic setActive(path){\r\n\t\tvar model = Navbar.createVm();\r\n\t\tmodel.items.forEach(i=> {\r\n\t\t\ti.active = i.path == path;\r\n\t\t});\r\n\t\tNavbar.render(model);\r\n\t}\r\n\r\n\tstatic createVm(){\r\n\t\treturn {\r\n\t\t\titems: [\r\n\t\t\t\t{path: '#login', title: 'Login', show: !Auth.isLogined()},\r\n\t\t\t\t{path: '#signup', title: 'Signup', show: !Auth.isLogined()},\r\n\t\t\t\t{path: '#list', title: 'List my dates!', show: Auth.isLogined()},\r\n\t\t\t\t{path: '#logout', title: 'Logout', show: Auth.isLogined()}\r\n\t\t\t]\r\n\t\t}\r\n\t}\r\n}\nclass RouteMatcher{\r\n\tconstructor(){\r\n\t\tthis.urlVarRegex = new RegExp('/:(\\\\w+)');\r\n\r\n\t\tthis.routing = {};\r\n\t\tthis.patterns = {};\r\n\t}\r\n\r\n\taddRoute(path, route){\r\n\t\tvar list = this.isPattern(path) ? \"patterns\" : \"routing\";\r\n\t\tthis[list][path] = route;\r\n\t}\r\n\r\n\tisPattern(path){\r\n\t\treturn this.urlVarRegex.exec(path) != null;\r\n\t}\r\n\r\n\tmatch(path){\r\n\t\treturn this.routing[path] || this.findInPatterns(path);\r\n\t}\r\n\r\n\tfindInPatterns(path){\r\n\t\tfor (var pattern in this.patterns) {\r\n\t\t\tvar routeData = this.getPatternValue(path, pattern);\r\n\t\t\tif (routeData) \r\n\t\t\t{\r\n\t\t\t\tvar match = this.patterns[pattern];\r\n\t\t\t\tmatch.routeData = routeData;\r\n\t\t\t\treturn match;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetPatternValue(path, pattern){\r\n\t\tvar name = this.urlVarRegex.exec(pattern)[1];\r\n\t\tvar value = this.getRegexByPattern(pattern).exec(path);\r\n\t\tif (value != null) \r\n\t\t\treturn {\r\n\t\t\t\t[name] : value[1]\r\n\t\t\t};\r\n\t}\r\n\r\n\tgetRegexByPattern(pattern){\r\n\t\treturn new RegExp(pattern.replace(this.urlVarRegex, \"\\/(\\\\w+)\"), 'g');\r\n\t}\r\n}\nclass Router {\r\n\tstatic init(){\r\n\t\tthis.matcher = new RouteMatcher();\r\n\r\n\t\twindow.onpopstate = (event) => {\r\n\t\t\tthis.go(document.location.hash, false);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic when(path, route){ \r\n\t\tthis.matcher.addRoute(path, route);\r\n\t\treturn this;\r\n\t}\r\n\tstatic otherwise(routeName){\r\n\t\tthis.defaultRoute = routeName;\r\n\t\treturn this;\r\n\t}\r\n\tstatic canGo(path){\r\n\t\treturn !!this.matcher.match(path);\r\n\t}\r\n\tstatic go(path, pushState = true) {\r\n\t\tvar match = this.matcher.match(path);\r\n\t\tif (!match) \r\n\t\t\tmatch = this.matcher.match(this.defaultRoute());\r\n\t\tif (pushState)\r\n\t\t\twindow.history.pushState({path}, location.title, path);\r\n\t\tNavbar.setActive(path);\r\n\t\tmatch.init(match);\r\n\t}\r\n}\nclass Token {\r\n\tconstructor(){\r\n\t\tthis.TOKEN_KEY = \"user.token\";\r\n\t}\r\n\r\n\tget(){\r\n\t\treturn localStorage[this.TOKEN_KEY];\r\n\t}\r\n\tset(token){\r\n\t\tlocalStorage[this.TOKEN_KEY] = token;\r\n\t}\r\n}\nclass Utils{\r\n\tstatic getErrors(xhr){\r\n\t\tvar response = JSON.parse(xhr.responseText);\r\n\t\tif (!response.errors) return;\r\n\t\treturn response.errors\r\n\t\t\t\t\t\t\t .reduce((agr, cur) => {\r\n\t\t\t\t\t\t \t\tvar key = Object.keys(cur)[0];\r\n\t\t\t\t\t\t \t\tagr[key] = agr[key] || {};\r\n\t\t\t\t\t\t \t\tagr[key].error = cur[key];\r\n\t\t\t\t\t\t \t\treturn agr;\r\n\t\t\t\t\t\t \t}, {});\r\n\t}\r\n\tstatic getError(xhr){\r\n\t\tvar response = JSON.parse(xhr.responseText);\r\n\t\tif (!response.error) return;\r\n\t\treturn response;\r\n\t}\r\n\r\n\tstatic formToObject(form){\r\n\t\treturn form.find('input[type!=submit]')\r\n\t\t\t\t   .toArray()\r\n\t\t\t\t   .reduce((agr, cur)=>{\r\n\t\t\t\t   \t\tvar $el = $(cur);\r\n\t\t\t\t   \t\tvar key = $el.attr('name');\r\n\t\t\t\t   \t\tagr[key] = agr[key] || {};\r\n\t\t\t\t   \t\tagr[key].value = $el.val();\r\n\t\t\t\t   \t\treturn agr;\r\n\t\t\t\t\t}, {});\r\n\t}\r\n\tstatic createErrorModel(vm, form, xhr){\r\n\t\tvar errors = Utils.getErrors(xhr) || Utils.getError(xhr);\r\n\t\tvar enteredData = Utils.formToObject(form);\r\n\t\treturn $.extend(true, SignupPage.createVM(), enteredData, errors);\r\n\t}\r\n}\nclass DetailsPage{\r\n\tconstructor(route){\r\n\t\tif (!Auth.isLogined()) \r\n\t\t\tRouter.go('#login');\r\n\t\t\r\n\t\tAPI.getUser(route.routeData.id)\r\n\t\t   .done(data => {\r\n\t\t   \t\tvar vm = data[0].user;\r\n\t\t   \t\tView.render('details', vm);\r\n\t\t   })\r\n\t\t   .fail((...args)=>{\r\n\t\t   \t\tconsole.log('fail', args);\r\n\t\t   });\r\n\t}\r\n}\nclass ListPage{\r\n\tconstructor(){\r\n\t\tif (!Auth.isLogined()) \r\n\t\t\tRouter.go('#login');\r\n\r\n\t\tAPI.getUsers()\r\n\t\t   .done(data => {\r\n\t\t   \t\tvar users = ListPage.adaptVM(data);\r\n\t\t   \t\tView.render('list', { users });\r\n\t\t \t});\r\n\t}\r\n\tstatic adaptVM(data){\r\n\t\treturn data.map(el => {\r\n\t\t\tel.user.isMale = el.user.gender == 'male'\r\n\t\t\treturn el;\r\n\t\t});\r\n\t}\r\n}\nclass LoginPage {\r\n\tconstructor(route){\r\n\t\tif (Auth.isLogined()) \r\n\t\t\tRouter.go('#list');\r\n\r\n\t\tView.render(route.templateId, LoginPage.createVM());\r\n\t\t$(document).on(\"click\", '.jsLogin', (e) => {\r\n\t\t\te.preventDefault();\r\n\t\t\tvar form = $(e.target).parents('form');\r\n\t\t\tAPI.login(form)\r\n\t\t\t   .done((data)=>{\r\n\t\t\t   \t\t$(document).trigger('logined', data.token);\r\n\t\t\t \t\tRouter.go('#list');\r\n\t\t\t    })\r\n\t\t\t   .fail((xhr)=>{\r\n\t\t\t \t\tvar vm = Utils.createErrorModel(LoginPage.createVM(), form, xhr);\r\n\t\t\t\t\tView.render(\"login\", vm);\r\n\t\t\t \t});\r\n\t\t});\r\n\t}\r\n\r\n\tstatic createVM(){\r\n\t\treturn {\r\n\t\t\tlogin : {\r\n\t\t\t\tplaceholder: 'enter your login',\r\n\t\t\t\tname: 'login'\r\n\t\t\t},\r\n\t\t\tpassword : {\r\n\t\t\t\tplaceholder: 'enter your password',\r\n\t\t\t\tname: 'password'\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\nclass LogoutPage{\r\n\tconstructor(){\r\n\t\tif (!Auth.isLogined()) \r\n\t\t\tRouter.go('#login');\r\n\r\n\t\t$(document).trigger('logedOut');\r\n\t\tRouter.go('#login');\r\n\t}\r\n}\nclass SignupPage {\r\n\tconstructor(route){\r\n\t\tif (Auth.isLogined()) \r\n\t\t\tRouter.go('#list');\r\n\r\n\t\tView.render(route.templateId, SignupPage.createVM());\r\n\t\t$(document).on(\"click\", '.jsSignup', (e) => {\r\n\t\t\te.preventDefault();\r\n\t\t\tvar form = $(e.target).parents('form');\r\n\t\t\tAPI.signUp(form)\r\n\t\t\t   .done((data)=> {\r\n\t\t\t   \t\t$(document).trigger('logined', data.token);\r\n\t\t\t \t\tRouter.go('#list');\r\n\t\t\t    })\r\n\t\t\t \t.fail((xhr)=>{\r\n\t\t\t \t\tvar vm = Utils.createErrorModel(SignupPage.createVM(), form, xhr);\r\n\t\t\t\t\tView.render(\"signup\", vm);\r\n\t\t\t \t});\r\n\t\t});\r\n\t}\r\n\r\n\tstatic createVM(){\r\n\t\treturn {\r\n\t\t\tlogin : {\r\n\t\t\t\tplaceholder: 'enter your login',\r\n\t\t\t\tname: 'login'\r\n\t\t\t},\r\n\t\t\tpassword : {\r\n\t\t\t\tplaceholder: 'enter your new password',\r\n\t\t\t\tname: 'password'\r\n\t\t\t},\r\n\t\t\tpasswordConfirmation : {\r\n\t\t\t\tplaceholder: 'retype it',\r\n\t\t\t\tname: 'passwordConfirmation'\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\n(() => {\r\n\t'use strict';\r\n\t$(() => {\r\n\t\tAPI.init('http://api.sudodoki.name:8888');\r\n\t\tView.setContainer($('.container'));\r\n\t\tAjaxInterceptor.init();\r\n\t\tNavbar.init($('.jsNav'), $('#nav'));\r\n\t\tRouter.init();\r\n\t\tRouter.when('#login', { templateId: 'login', init: LoginPage })\r\n\t\t\t  .when('#signup', { templateId: 'signup', init: SignupPage })\r\n\t\t\t  .when('#list', { templateId: 'list', init: ListPage })\r\n\t\t\t  .when('#details/:id', {templateId: 'details', init: DetailsPage })\r\n\t\t\t  .when('#logout', { init: LogoutPage })\r\n\t\t\t  .otherwise(() => Auth.isLogined() ? '#list' : '#login');\r\n\r\n\t  \tRouter.go(location.hash);\r\n\t});\r\n})();"],"sourceRoot":"/source/"}